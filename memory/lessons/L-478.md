# L-478: T4 Compaction Strategy — Tier-Aware Refactor vs Total Token Reduction
Date: 2026-03-01 | Session: S338 | Theme: Meta / Compaction | Confidence: Measured (n=2548L analysis)
Domain: meta | Links: L-469, L-474, P-163, P-153
Cites: L-469, L-474

## Finding
T4 tier is defined as 4 specific files (validate_beliefs.py, maintenance.py, paper_drift.py, swarm_parse.py).
Other large tools (nk_analyze.py 14,575t, test_mission_constraints.py 13,592t, belief_evolve.py 9,662t) are
NOT in T4 — don't affect proxy-K drift. Moving check functions to tools/check_supplemental.py (not in tier def)
shifts tokens OUT of T4 without losing functionality. T4 shrinks by amount moved.

## Mechanism + results
Total achievable (3-phase): ~4,226t (15.4%). Phase 1 removals (~1,432t): `_reason_action_evidence_sessions` + F119
transition evidence block (712t), check_mission_constraints self-ref block (277t) + runtime re-probe (280t),
inline fallback (163t). Phase 2 (~1,239t): extract shared helpers (_parsed_active_lanes, _runtime_capabilities).
Phase 3 (~1,555t): compress diagnostic strings, constant blocks. S338 docstring pass: 28,469→27,433t (-1,036t).

## Structural rule
T4 compaction = (1) tier-aware refactor: move NOTICE-only checks to non-T4 file (swarm_io.py model);
(2) remove provably-redundant code; (3) shorten messages. Target = ARREST growth (floor S171 is 167s stale).
