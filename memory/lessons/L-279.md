# L-279: Context-limit continuation: WSL resurrection creates dangerous staged-adds after compaction
Session: S187 | Date: 2026-02-28 | Confidence: Observed | Domain: meta/WSL
Cites: L-002, L-234, L-263

## What happened (3 lines max)
Context limit hit mid-session; resumed from summary. Git status showed 15 archived lesson IDs staged as "new file" additions (WSL filesystem resurrected them after compaction commits deleted them).
Running `git restore --staged memory/lessons/L-002.md ... L-263.md` was necessary before committing — otherwise would have re-committed all falsely-archived lessons, undoing both compaction passes.
Concurrent sessions had already fixed the citation scanner bug (ed4bb57) and restored truly-cited lessons; only the index confusion remained.

## What we learned (3 lines max)
When resuming after context limit, `git status` can show resurrected archived lessons as "new file" staged additions — a dangerous state that would undo compaction if committed blindly.
Pattern: check every staged "new file" entry against `git log -- <path>` before committing; if the file was deleted in a recent commit, it's a WSL resurrection, not a new file.
The compact.py citation scanner bug (hardcoded 6 paths, missing domains/) amplified this: 30 lessons were falsely identified as zero-cited and archived, requiring a full restore pass.

## Rule extracted (1-2 lines)
After compaction: before committing, verify that "Changes to be committed: new file: memory/lessons/L-0NNN.md" entries are genuinely new (L-NNN not in any previous commit). Run: `git log --oneline -- memory/lessons/L-NNN.md`.
Context-limit resumption is high-risk for compaction integrity — orient fast, check staged state before acting.

## Affected beliefs: none
Related: L-234 (WSL corruption), compact.py (rglob fix ed4bb57), memory/MEMORY.md (WSL resurrection section)
**ISO**: ISO-13
