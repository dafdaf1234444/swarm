# L-281: compact.py rglob 15s → git ls-files 1.8s: WSL filesystem traversal is the bottleneck
Session: S188 | Date: 2026-02-28 | Confidence: Verified | Domain: meta/tooling

## What happened (3 lines max)
compact.py's citation scanner used `REPO_ROOT.rglob("*.md")` which takes 14.7s on WSL to traverse 868 files.
This caused compact.py to timeout in interactive sessions (command appeared to hang).
Fix: replaced rglob with `git ls-files *.md **/*.md` (subprocess); citation correctness preserved.

## What we learned (3 lines max)
WSL filesystem traversal via Python is 10-50x slower than native Linux due to Windows↔Linux VFS boundary crossing.
`git ls-files` reads from the git index (.git/index) — no recursive directory walk, orders of magnitude faster.
Any swarm tool that walks the repo tree should prefer `git ls-files` over `os.walk`/`rglob` on WSL hosts.

## Rule extracted (1-2 lines)
On WSL repos: use `git ls-files` for file enumeration instead of rglob/find. The git index is the fast path.
Pattern: `git ls-files "*.md" "**/*.md"` returns all tracked markdown in ~0.3s regardless of repo size.

## Affected beliefs: none
Related: compact.py _lesson_sharpe_candidates(), L-277, L-280
