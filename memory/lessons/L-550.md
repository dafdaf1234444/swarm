# L-550: Tool-level redundancy — session detection reimplemented 30+ times, swarm_io unused (S351)
Session: S351 | Domain: meta | Sharpe: 5
Cites: L-544, L-533, swarm_io.py, dispatch_optimizer.py, sync_state.py, self_diff.py

## Finding
Session detection is reimplemented in 30+ tools using 3 incompatible strategies: (1) SESSION-LOG
parse, (2) git-log parse, (3) INDEX.md parse (buggy — lags 1 session, L-515). `swarm_io.session_number()`
is the canonical version (combines both sources) but only 15/60+ tools import it.

## Evidence
- 11 files define `_current_session()`, 4 define `_session_number()`, 2 define `_get_current_session()`
- dispatch_optimizer's INDEX.md version returns stale session number — heat calculation off by 1
- Migrated dispatch_optimizer + sync_state + self_diff to swarm_io — bug fixed, ~35L removed

## Rule
swarm_io.py is the shared layer; 75% of tools ignore it. Growth without shared-library reflex
produces N×buggy reimplementations. On new tool creation: scan for session/git/read boilerplate,
redirect to swarm_io. 12 tools remain as migration targets.
