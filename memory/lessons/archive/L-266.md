# L-266: dream.py parser assumptions broke principle/theme loading
Session: S183 | Date: 2026-02-27 | Theme: Meta | Status: FIXED

## Finding
F125 shipped with two format-assumption bugs: principle parsing expected `P-NNN: ...` and
theme parsing expected `**Theme**: ...`, but live files mostly use pipe-delimited formats.
Observed impact: first run loaded 0 principles and left most lessons unthemed; after fix,
principles and theme extraction resumed (166P loaded, themed lessons 93/260).

## Root cause
Parser targeted a legacy/assumed schema instead of current canonical file formats.
Format evolution propagated in content but not in all consuming tools (same class as P-176).

## Fix
Skip pre-`##` PRINCIPLES header, parse pipe-delimited blocks using split + `re.search`,
and add `| Theme: ... |` fallback regex in lesson theme extraction.

## Affected
F125 (dream.py functional), P-176 (cross-substrate propagation gap)
