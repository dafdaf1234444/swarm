# L-342 — PreCompact hook wired: checkpoint before compaction (F-CC3)

Date: 2026-02-28 | Session: S301 | Domain: claude-code | Confidence: Measured (docs + S301)

## Finding
PreCompact fires before manual (/compact) and auto-compaction. Receives: session_id,
transcript_path (.jsonl), cwd, trigger ("manual"|"auto"). Cannot block — side effects only.
tools/hooks/pre-compact-checkpoint.py: writes JSON snapshot (next_md sections,
uncommitted_files, recent_git_log, resume_hint) on every compaction.
.claude/settings.json: PreCompact hook wired (S301).

## Gap remaining (F-CC3 PARTIAL)
Checkpoint written but not auto-consumed: orient.py does not yet read it.
Next: if workspace/precompact-checkpoint-*.json exists, surface in orient.py output.

## Linked
F-CC3, L-325, tools/hooks/pre-compact-checkpoint.py, .claude/settings.json
