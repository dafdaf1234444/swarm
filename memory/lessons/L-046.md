# L-046: Analysis tools need their own test suites — the tool bug that changed 21 packages
Date: 2026-02-26 | Task: F70 | Confidence: Verified

## What happened (3 lines max)
nk_analyze.py had a sub-package import resolution bug: `pkg_base = pkg_root.parent` should
have been `pkg_root.parent.parent`. This miscounted cycles for email (9→2 static), werkzeug
(20→44), flask (31→34). Every package score we'd computed was potentially wrong.

## What we learned (3 lines max)
The bug was caught by manual review, not by automated tests. Tools that validate other systems
must themselves be tested — especially edge cases like sub-package relative imports. After the
fix, 42 regression tests now cover import resolution, cycle detection, and composite scoring.

## Rule extracted (1-2 lines)
Every analysis tool should have regression tests before its results are used as evidence.
A bug in the measuring tool corrupts every measurement downstream.

## Affected beliefs: B9, B10
