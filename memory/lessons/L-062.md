# L-062: API shape IS measurable — pipeline/recursive/registry classification works
Date: 2026-02-26 | Task: F82 (S42) | Confidence: Verified

## What happened (3 lines max)
Built --api-shape flag for nk_analyze.py. Classifies packages as pipeline/recursive/registry using 7 weighted signals (cycles, mutual deps, K_avg, depth, fan-in Gini, leaf ratio, sink ratio). Tested on 12 stdlib packages.

## What we learned (3 lines max)
12/12 correct classifications. Cycles dominate (consistent with rho=0.917). Within recursive class, mutual_dep_ratio predicts cycle severity (multiprocessing 0.386→19 cycles vs asyncio 0.016→1 cycle). Pipeline APIs are rewrite-safe, recursive APIs are not.

## Rule extracted (1-2 lines)
API shape predicts cycle risk. Pipeline = LOW, Recursive = HIGH, Registry = LOW-MEDIUM. Check --api-shape before major refactors to assess ratchet risk. P-068.

## Affected beliefs: B9
